import { getFavoritesItems, addFavoriteItem, removeFavoriteItem, updateFavoritesItemsAmount } from './store/favoriteItems.js';
export async function toggleFavorite(event, sources) {
    const target = event.target;
    const toggleClass = 'active';
    if (!(target instanceof Element))
        return;
    const store = getFavoritesItems();
    if (store == null) {
        await addFavoriteItem(target.id, {}, sources);
        target.classList.add(toggleClass);
        updateFavoritesItemsAmount();
    }
    else if (store[target.id] != null) {
        removeFavoriteItem(target.id, store);
        target.classList.remove(toggleClass);
        updateFavoritesItemsAmount();
    }
    else {
        await addFavoriteItem(target.id, store, sources);
        target.classList.add(toggleClass);
        updateFavoritesItemsAmount();
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidG9nZ2xlRmF2b3JpdGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvdG9nZ2xlRmF2b3JpdGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxFQUFDLGlCQUFpQixFQUFFLGVBQWUsRUFBRSxrQkFBa0IsRUFBRSwwQkFBMEIsRUFBQyxNQUFNLDBCQUEwQixDQUFBO0FBRzNILE1BQU0sQ0FBQyxLQUFLLFVBQVUsY0FBYyxDQUFDLEtBQVksRUFBRSxPQUFrQjtJQUVuRSxNQUFNLE1BQU0sR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFBO0lBQzNCLE1BQU0sV0FBVyxHQUFXLFFBQVEsQ0FBQTtJQUVwQyxJQUFJLENBQUMsQ0FBQyxNQUFNLFlBQVksT0FBTyxDQUFDO1FBQUUsT0FBTTtJQUV4QyxNQUFNLEtBQUssR0FBRyxpQkFBaUIsRUFBRSxDQUFBO0lBRWpDLElBQUksS0FBSyxJQUFJLElBQUksRUFBRTtRQUNqQixNQUFNLGVBQWUsQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxPQUFPLENBQUMsQ0FBQTtRQUM3QyxNQUFNLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsQ0FBQTtRQUNqQywwQkFBMEIsRUFBRSxDQUFBO0tBQzdCO1NBQU0sSUFBSSxLQUFLLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxJQUFJLElBQUksRUFBRTtRQUNuQyxrQkFBa0IsQ0FBQyxNQUFNLENBQUMsRUFBRSxFQUFFLEtBQUssQ0FBQyxDQUFBO1FBQ3BDLE1BQU0sQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFBO1FBQ3BDLDBCQUEwQixFQUFFLENBQUE7S0FDN0I7U0FBTTtRQUNMLE1BQU0sZUFBZSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFBO1FBQ2hELE1BQU0sQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFdBQVcsQ0FBQyxDQUFBO1FBQ2pDLDBCQUEwQixFQUFFLENBQUE7S0FDN0I7QUFDSCxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSVNvdXJjZSB9IGZyb20gJy4vc291cmNlcy5qcydcbmltcG9ydCB7Z2V0RmF2b3JpdGVzSXRlbXMsIGFkZEZhdm9yaXRlSXRlbSwgcmVtb3ZlRmF2b3JpdGVJdGVtLCB1cGRhdGVGYXZvcml0ZXNJdGVtc0Ftb3VudH0gZnJvbSAnLi9zdG9yZS9mYXZvcml0ZUl0ZW1zLmpzJ1xuaW1wb3J0IHsgQWN0aXZlIH0gZnJvbSAnLi90eXBlcy90eXBlcy5qcydcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHRvZ2dsZUZhdm9yaXRlKGV2ZW50OiBFdmVudCwgc291cmNlczogSVNvdXJjZVtdKTogUHJvbWlzZTx2b2lkPiB7XG5cbiAgY29uc3QgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0XG4gIGNvbnN0IHRvZ2dsZUNsYXNzOiBBY3RpdmUgPSAnYWN0aXZlJ1xuXG4gIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIEVsZW1lbnQpKSByZXR1cm5cblxuICBjb25zdCBzdG9yZSA9IGdldEZhdm9yaXRlc0l0ZW1zKClcblxuICBpZiAoc3RvcmUgPT0gbnVsbCkge1xuICAgIGF3YWl0IGFkZEZhdm9yaXRlSXRlbSh0YXJnZXQuaWQsIHt9LCBzb3VyY2VzKVxuICAgIHRhcmdldC5jbGFzc0xpc3QuYWRkKHRvZ2dsZUNsYXNzKVxuICAgIHVwZGF0ZUZhdm9yaXRlc0l0ZW1zQW1vdW50KClcbiAgfSBlbHNlIGlmIChzdG9yZVt0YXJnZXQuaWRdICE9IG51bGwpIHtcbiAgICByZW1vdmVGYXZvcml0ZUl0ZW0odGFyZ2V0LmlkLCBzdG9yZSlcbiAgICB0YXJnZXQuY2xhc3NMaXN0LnJlbW92ZSh0b2dnbGVDbGFzcylcbiAgICB1cGRhdGVGYXZvcml0ZXNJdGVtc0Ftb3VudCgpXG4gIH0gZWxzZSB7XG4gICAgYXdhaXQgYWRkRmF2b3JpdGVJdGVtKHRhcmdldC5pZCwgc3RvcmUsIHNvdXJjZXMpXG4gICAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQodG9nZ2xlQ2xhc3MpXG4gICAgdXBkYXRlRmF2b3JpdGVzSXRlbXNBbW91bnQoKVxuICB9XG59XG4iXX0=